import React, { useState } from 'react';
import { Button } from './ui/button';
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Input } from './ui/input';
import { Label } from './ui/label';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { Badge } from './ui/badge';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from './ui/dialog';
import { X, Mail, Lock, User, Crown, MapPin } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import { nycNeighborhoods } from '../data/mock';\n\nconst AuthModal = ({ onClose }) => {\n  const { login, register } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [loginForm, setLoginForm] = useState({ email: '', password: '' });\n  const [registerForm, setRegisterForm] = useState({\n    username: '',\n    email: '',\n    password: '',\n    membership_tier: 'basic',\n    preferences: {\n      delivery_area: 'Manhattan',\n      categories: [],\n      price_range: [20, 100]\n    }\n  });\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    const result = await login(loginForm);\n    if (result.success) {\n      onClose();\n    }\n    \n    setLoading(false);\n  };\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    const result = await register(registerForm);\n    if (result.success) {\n      onClose();\n    }\n    \n    setLoading(false);\n  };\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md bg-gradient-to-br from-gray-900 to-black border-green-400/30\">\n        <DialogHeader>\n          <DialogTitle className=\"text-white text-center flex items-center justify-center space-x-2\">\n            <span className=\"text-green-400\">Status</span>\n            <span className=\"text-yellow-400\">X</span>\n            <span className=\"text-green-400\">Smoakland</span>\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Tabs defaultValue=\"login\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2 bg-black/50\">\n            <TabsTrigger value=\"login\" className=\"data-[state=active]:bg-green-600 data-[state=active]:text-white\">\n              Sign In\n            </TabsTrigger>\n            <TabsTrigger value=\"register\" className=\"data-[state=active]:bg-green-600 data-[state=active]:text-white\">\n              Join Now\n            </TabsTrigger>\n          </TabsList>\n          \n          {/* Login Tab */}\n          <TabsContent value=\"login\">\n            <Card className=\"bg-transparent border-none\">\n              <CardContent className=\"space-y-4 pt-4\">\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-email\" className=\"text-white\">Email</Label>\n                    <div className=\"relative\">\n                      <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"login-email\"\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        value={loginForm.email}\n                        onChange={(e) => setLoginForm({ ...loginForm, email: e.target.value })}\n                        className=\"pl-10 bg-black/50 border-gray-600 text-white placeholder-gray-400 focus:border-green-400\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-password\" className=\"text-white\">Password</Label>\n                    <div className=\"relative\">\n                      <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"login-password\"\n                        type=\"password\"\n                        placeholder=\"Enter your password\"\n                        value={loginForm.password}\n                        onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}\n                        className=\"pl-10 bg-black/50 border-gray-600 text-white placeholder-gray-400 focus:border-green-400\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  <Button \n                    type=\"submit\" \n                    disabled={loading}\n                    className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n                  >\n                    {loading ? 'Signing in...' : 'Sign In'}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n          {/* Register Tab */}\n          <TabsContent value=\"register\">\n            <Card className=\"bg-transparent border-none\">\n              <CardContent className=\"space-y-4 pt-4\">\n                <form onSubmit={handleRegister} className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-username\" className=\"text-white\">Username</Label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"register-username\"\n                        type=\"text\"\n                        placeholder=\"Choose a username\"\n                        value={registerForm.username}\n                        onChange={(e) => setRegisterForm({ ...registerForm, username: e.target.value })}\n                        className=\"pl-10 bg-black/50 border-gray-600 text-white placeholder-gray-400 focus:border-green-400\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-email\" className=\"text-white\">Email</Label>\n                    <div className=\"relative\">\n                      <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"register-email\"\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        value={registerForm.email}\n                        onChange={(e) => setRegisterForm({ ...registerForm, email: e.target.value })}\n                        className=\"pl-10 bg-black/50 border-gray-600 text-white placeholder-gray-400 focus:border-green-400\"\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-password\" className=\"text-white\">Password</Label>\n                    <div className=\"relative\">\n                      <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                      <Input\n                        id=\"register-password\"\n                        type=\"password\"\n                        placeholder=\"Create a password (min 8 chars)\"\n                        value={registerForm.password}\n                        onChange={(e) => setRegisterForm({ ...registerForm, password: e.target.value })}\n                        className=\"pl-10 bg-black/50 border-gray-600 text-white placeholder-gray-400 focus:border-green-400\"\n                        minLength={8}\n                        required\n                      />\n                    </div>\n                  </div>\n                  \n                  {/* Membership Tier */}\n                  <div className=\"space-y-3\">\n                    <Label className=\"text-white\">Membership Tier</Label>\n                    <div className=\"grid grid-cols-1 gap-3\">\n                      <div \n                        className={`p-3 rounded-lg border cursor-pointer transition-all ${\n                          registerForm.membership_tier === 'basic'\n                            ? 'border-green-400 bg-green-900/30'\n                            : 'border-gray-600 bg-black/30'\n                        }`}\n                        onClick={() => setRegisterForm({ ...registerForm, membership_tier: 'basic' })}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <h4 className=\"text-white font-semibold\">Basic Membership</h4>\n                            <p className=\"text-green-400 font-bold\">$4.99/month</p>\n                          </div>\n                          <div className=\"w-4 h-4 rounded-full border-2 border-green-400\">\n                            {registerForm.membership_tier === 'basic' && (\n                              <div className=\"w-full h-full bg-green-400 rounded-full\" />\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div \n                        className={`p-3 rounded-lg border cursor-pointer transition-all ${\n                          registerForm.membership_tier === 'premium'\n                            ? 'border-yellow-400 bg-yellow-900/30'\n                            : 'border-gray-600 bg-black/30'\n                        }`}\n                        onClick={() => setRegisterForm({ ...registerForm, membership_tier: 'premium' })}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center space-x-2\">\n                            <div>\n                              <div className=\"flex items-center space-x-2\">\n                                <h4 className=\"text-white font-semibold\">Premium + Wictionary</h4>\n                                <Crown className=\"h-4 w-4 text-yellow-400\" />\n                              </div>\n                              <p className=\"text-yellow-400 font-bold\">$7.99/month</p>\n                            </div>\n                          </div>\n                          <div className=\"w-4 h-4 rounded-full border-2 border-yellow-400\">\n                            {registerForm.membership_tier === 'premium' && (\n                              <div className=\"w-full h-full bg-yellow-400 rounded-full\" />\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Delivery Area */}\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"delivery-area\" className=\"text-white flex items-center space-x-1\">\n                      <MapPin className=\"h-4 w-4\" />\n                      <span>Delivery Area</span>\n                    </Label>\n                    <select\n                      id=\"delivery-area\"\n                      value={registerForm.preferences.delivery_area}\n                      onChange={(e) => setRegisterForm({\n                        ...registerForm,\n                        preferences: {\n                          ...registerForm.preferences,\n                          delivery_area: e.target.value\n                        }\n                      })}\n                      className=\"w-full bg-black/50 border border-gray-600 text-white rounded-md px-3 py-2 focus:border-green-400 focus:outline-none\"\n                    >\n                      {nycNeighborhoods.map(area => (\n                        <option key={area} value={area}>{area}</option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  <Button \n                    type=\"submit\" \n                    disabled={loading}\n                    className=\"w-full bg-gradient-to-r from-green-600 to-yellow-600 hover:from-green-700 hover:to-yellow-700 text-white font-bold\"\n                  >\n                    {loading ? 'Creating account...' : 'Join StatusXSmoakland'}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n        \n        <div className=\"text-center pt-4 border-t border-gray-700\">\n          <p className=\"text-gray-400 text-xs\">\n            By joining, you confirm you are 21+ and not affiliated with law enforcement.\n          </p>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AuthModal;"